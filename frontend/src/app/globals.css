@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap');
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

/* Percentage width utilities (5% steps) - used for progress bars without inline styles */
.w-p-0 { width: 0%; }
.w-p-5 { width: 5%; }
.w-p-10 { width: 10%; }
.w-p-15 { width: 15%; }
.w-p-20 { width: 20%; }
.w-p-25 { width: 25%; }
.w-p-30 { width: 30%; }
.w-p-35 { width: 35%; }
.w-p-40 { width: 40%; }
.w-p-45 { width: 45%; }
.w-p-50 { width: 50%; }
.w-p-55 { width: 55%; }
.w-p-60 { width: 60%; }
.w-p-65 { width: 65%; }
.w-p-70 { width: 70%; }
.w-p-75 { width: 75%; }
.w-p-80 { width: 80%; }
.w-p-85 { width: 85%; }
.w-p-90 { width: 90%; }
.w-p-95 { width: 95%; }
.w-p-100 { width: 100%; }

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
}

/* Ensure native form controls match theme to avoid white-on-white dropdowns */
select, input, textarea {
  color-scheme: light;
}
.dark select,
.dark input,
.dark textarea {
  color-scheme: dark;
}

/* Apply overflow hidden only to manga reader pages */
.overflow-hidden-page {
  overflow: hidden;
}

/* Japanese font class */
.font-japanese {
  font-family: "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Meiryo", "MS Gothic", sans-serif;
  line-height: 1.6;
}

/* Japanese font class */
.font-japanese {
  font-family: "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Meiryo", "MS Gothic", sans-serif;
  line-height: 1.6;
}

/* Custom scrollbar for sidebar */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: #f1f1f1;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* Line clamp utilities for text truncation */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Prevent browser extensions (like Dark Reader) from modifying SVG elements */
svg {
  filter: none !important;
}

svg[data-darkreader-inline-stroke],
svg[data-darkreader-inline-fill] {
  filter: none !important;
}

/* Heropattern topography background */
.bg-seigaiha {
  background-color: #f8faff;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 56 28' width='56' height='28'%3E%3Cpath fill='%234f46e5' fill-opacity='0.08' d='M56 26v2h-7.75c2.3-1.27 4.94-2 7.75-2zm-26 2a2 2 0 1 0-4 0h-4.09A25.98 25.98 0 0 0 0 16v-2c.67 0 1.34.02 2 .07V14a2 2 0 0 0-2-2v-2a4 4 0 0 1 3.98 3.6 28.09 28.09 0 0 1 2.8-3.86A8 8 0 0 0 0 6V4a9.99 9.99 0 0 1 8.17 4.23c.94-.95 1.96-1.83 3.03-2.63A13.98 13.98 0 0 0 0 0h7.75c2 1.1 3.73 2.63 5.1 4.45 1.12-.72 2.3-1.37 3.53-1.93A20.1 20.1 0 0 0 14.28 0h2.7c.45.56.88 1.14 1.29 1.74 1.3-.48 2.63-.87 4-1.15-.11-.2-.23-.4-.36-.59H26v.07a28.4 28.4 0 0 1 4 0V0h4.09l-.37.59c1.38.28 2.72.67 4.01 1.15.4-.6.84-1.18 1.3-1.74h2.69a20.1 20.1 0 0 0-2.1 2.52c1.23.56 2.41 1.2 3.54 1.93A16.08 16.08 0 0 1 48.25 0H56c-4.58 0-8.65 2.2-11.2 5.6 1.07.8 2.09 1.68 3.03 2.63A9.99 9.99 0 0 1 56 4v2a8 8 0 0 0-6.77 3.74c1.03 1.2 1.97 2.5 2.79 3.86A4 4 0 0 1 56 10v2a2 2 0 0 0-2 2.07 28.4 28.4 0 0 1 2-.07v2c-9.2 0-17.3 4.78-21.91 12H30zM7.75 28H0v-2c2.81 0 5.46.73 7.75 2zM56 20v2c-5.6 0-10.65 2.3-14.28 6h-2.7c4.04-4.89 10.15-8 16.98-8zm-39.03 8h-2.69C10.65 24.3 5.6 22 0 22v-2c6.83 0 12.94 3.11 16.97 8zm15.01-.4a28.09 28.09 0 0 1 2.8-3.86 8 8 0 0 0-13.55 0c1.03 1.2 1.97 2.5 2.79 3.86a4 4 0 0 1 7.96 0zm14.29-11.86c1.3-.48 2.63-.87 4-1.15a25.99 25.99 0 0 0-44.55 0c1.38.28 2.72.67 4.01 1.15a21.98 21.98 0 0 1 36.54 0zm-5.43 2.71c1.13-.72 2.3-1.37 3.54-1.93a19.98 19.98 0 0 0-32.76 0c1.23.56 2.41 1.2 3.54 1.93a15.98 15.98 0 0 1 25.68 0zm-4.67 3.78c.94-.95 1.96-1.83 3.03-2.63a13.98 13.98 0 0 0-22.4 0c1.07.8 2.09 1.68 3.03 2.63a9.99 9.99 0 0 1 16.34 0z'%3E%3C/path%3E%3C/svg%3E");
}

/* Night mode presets for manga reader (applied to iframe) */
.manga-invert-soft {
  /* Soft: gentle inversion, minimal changes */
  filter: invert(0.85) hue-rotate(180deg) brightness(0.9) contrast(0.92) sepia(0.05);
}

.manga-invert-standard {
  /* Balanced: default comfortable night reading */
  filter: invert(0.9) hue-rotate(180deg) brightness(0.88) contrast(0.9) sepia(0.07);
}

.manga-invert-dark {
  /* Dark: stronger dim and lower contrast */
  filter: invert(0.92) hue-rotate(180deg) brightness(0.82) contrast(0.85) sepia(0.08);
}

.manga-invert-warm {
  /* Warm: add warmth to reduce blue light */
  filter: invert(0.9) hue-rotate(175deg) brightness(0.9) contrast(0.9) sepia(0.18) saturate(1.05);
}

/* Themed presets */
.manga-invert-darkila {
  /* Darkila: deep dark with slight magenta hue */
  filter: invert(0.92) hue-rotate(190deg) brightness(0.8) contrast(0.86) sepia(0.1) saturate(1.08);
}

.manga-invert-nord {
  /* Nord: cool, subdued blues and low contrast */
  filter: invert(0.88) hue-rotate(200deg) brightness(0.9) contrast(0.88) saturate(0.95);
}

.manga-invert-midnight {
  /* Midnight: night-blue tint with gentle dim */
  filter: invert(0.9) hue-rotate(210deg) brightness(0.86) contrast(0.88) saturate(1.02);
}

/* Ultra soft: Gray tones (no invert, just dim and desaturate slightly) */
.manga-invert-graytones {
  /* Uses adjustable CSS variable when provided */
  filter: var(--manga-gray-filter, grayscale(0.1) brightness(0.9) contrast(0.95) saturate(0.95));
}

/* Greyer tones: a bit darker than Gray tones (still non-invert) */
.manga-invert-graytones-deep {
  /* Uses adjustable CSS variable when provided */
  filter: var(--manga-gray-deep-filter, grayscale(0.15) brightness(0.86) contrast(0.93) saturate(0.92));
}

/* Dark Tones: deeper dimming variant (non-invert) */
.manga-invert-darktones {
  /* Adjustable via --manga-darktones-filter */
  filter: var(--manga-darktones-filter, grayscale(0.10) brightness(0.75) contrast(0.98) saturate(0.90));
}

/* Sepia: warm tone with mild dimming (adjustable) */
.manga-invert-sepia {
  filter: var(--manga-sepia-filter, sepia(0.25) brightness(0.92) contrast(0.94) saturate(1.05));
}

/* Additional non-invert warm/tinted modes */
.manga-invert-amber {
  filter: var(--manga-amber-filter, sepia(0.55) hue-rotate(-10deg) saturate(1.15) brightness(0.94) contrast(0.95));
}
.manga-invert-cream {
  /* Cream Paper */
  filter: var(--manga-cream-filter, grayscale(0.15) sepia(0.20) hue-rotate(-5deg) saturate(0.95) brightness(0.96) contrast(0.96));
}
.manga-invert-duskrose {
  filter: var(--manga-duskrose-filter, sepia(0.35) hue-rotate(330deg) saturate(0.95) brightness(0.92) contrast(0.93));
}
.manga-invert-sage {
  /* Forest/Sage */
  filter: var(--manga-sage-filter, sepia(0.25) hue-rotate(320deg) saturate(0.85) brightness(0.93) contrast(0.95));
}

/* Additional invert-based dark themes */
.manga-invert-trueblack {
  /* True Black (AMOLED) */
  filter: var(--manga-trueblack-filter, invert(1) brightness(0.88) contrast(0.96) saturate(0.85));
}
.manga-invert-slate {
  /* Slate */
  filter: var(--manga-slate-filter, invert(1) saturate(0.85) brightness(0.92) contrast(0.96));
}
.manga-invert-moonlight {
  /* Moonlight */
  filter: var(--manga-moonlight-filter, invert(1) hue-rotate(185deg) saturate(0.9) brightness(0.92) contrast(0.94));
}
.manga-invert-solarized {
  /* Solarized Dark-ish */
  filter: var(--manga-solarized-filter, invert(1) hue-rotate(120deg) saturate(0.75) brightness(0.94) contrast(0.92));
}

/* Utility / Accessibility */
.manga-invert-eink {
  /* Eâ€‘Ink */
  filter: var(--manga-eink-filter, grayscale(0.95) brightness(0.96) contrast(1.03));
}
.manga-invert-highcontrast {
  /* High Contrast */
  filter: var(--manga-highcontrast-filter, grayscale(0.85) brightness(1.00) contrast(1.15));
}

/* Back-compat alias (previous single mode) */
.manga-invert {
  filter: invert(0.9) hue-rotate(180deg) brightness(0.88) contrast(0.9) sepia(0.07);
}

/* Utility: force dark native dropdown/menu regardless of page theme */
.force-dark-menu {
  color-scheme: dark !important;
}
/* On some platforms, option text can inherit white from the select.
   Ensure options are readable in light mode when menus render with light backgrounds. */
:root:not(.dark) .force-dark-menu option {
  color: #111 !important;
}
/* Ensure optgroup headers are readable in light mode as well */
:root:not(.dark) .force-dark-menu optgroup {
  color: #111 !important;
}

/* Utility: Force a light native dropdown/menu for specific selects (fixes DeepL select showing dark menus in light mode) */
.force-light-menu {
  color-scheme: light !important;
}
/* Ensure options/optgroups are readable across themes */
:root:not(.dark) .force-light-menu option,
:root:not(.dark) .force-light-menu optgroup {
  color: #111 !important;
}
:root:not(.dark) .force-light-menu {
  color: #111 !important; /* Dark text on the closed select in light mode */
}
.dark .force-light-menu option,
.dark .force-light-menu optgroup {
  color: #fff !important;
}
/* Force light backgrounds for the native dropdown in light theme */
:root:not(.dark) .force-light-menu,
:root:not(.dark) .force-light-menu option,
:root:not(.dark) .force-light-menu optgroup {
  background-color: #ffffff !important;
}
